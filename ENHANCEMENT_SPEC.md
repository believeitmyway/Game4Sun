# 🚀 爆走！うんちドリル 強化仕様書

## 📊 現状分析

### 現在の魅力ポイント
1. ✅ **インパクトのあるテーマ**: うんちという親しみやすいテーマ
2. ✅ **視覚的な進捗**: レーサーが進む進捗バー
3. ✅ **派手な演出**: パーティクルエフェクト、効果音
4. ✅ **学習効率**: 苦手問題優先出題アルゴリズム
5. ✅ **成績管理**: カレンダー、グラフ、単元別統計

### 改善が必要な点
- ❌ **継続的なモチベーション**: 毎日続ける理由が弱い
- ❌ **達成感の可視化**: 成長が感じにくい
- ❌ **目標設定**: 明確な目標がない
- ❌ **報酬システム**: U-Pの使い道がない
- ❌ **ソーシャル要素**: 一人でやるだけ
- ❌ **バリエーション**: モードが単一

---

## 🎯 新機能仕様

### 1. レベル・ランクシステム ⭐⭐⭐

#### 1.1 プレイヤーレベル
- **経験値（EXP）システム**
  - 問題を1問正解するごとにEXP +10
  - 連続正解ボーナス: 3問連続正解で+5、5問連続で+10、10問連続で+20
  - レベルアップ時に盛大な演出（パーティクル、効果音、レベルアップ画面）
  - レベル上限: 100レベル（中学2年生が達成可能な範囲）

- **レベル表示**
  - トップ画面に現在のレベルとEXPバーを表示
  - 次のレベルまで必要なEXPを表示
  - レベルアップ時に「レベルアップ！」モーダル表示

#### 1.2 称号システム
- **称号の種類**
  - 初級: 「うんち初心者💩」（レベル1-10）
  - 中級: 「うんちマスター🚽」（レベル11-30）
  - 上級: 「うんちキング👑」（レベル31-50）
  - 最上級: 「うんちゴッド💫」（レベル51-100）
  - 特別称号: 「連続学習マスター🔥」（7日連続）、「完璧主義者✨」（正答率100%で50問以上）

- **称号の表示**
  - トップ画面、リザルト画面に称号を表示
  - 称号獲得時に特別な演出

---

### 2. ストリーク（連続学習）システム 🔥

#### 2.1 日次ストリーク
- **連続学習日数の記録**
  - 毎日1問以上解くとストリーク継続
  - ストリークが途切れると0にリセット
  - トップ画面に「🔥 7日連続！」のように表示

- **ストリークボーナス**
  - 3日連続: EXP +20%、U-P +10%
  - 7日連続: EXP +50%、U-P +25%、特別称号獲得
  - 14日連続: EXP +100%、U-P +50%、レア称号獲得
  - 30日連続: EXP +200%、U-P +100%、超レア称号獲得

#### 2.2 ストリーク表示
- カレンダー画面にストリーク表示
- ストリークが途切れそうな時に通知（「あと1問でストリーク継続！」）

---

### 3. アチーブメント（実績）システム 🏆

#### 3.1 実績カテゴリ

**学習量系**
- 「初めての問題」: 初めて問題を解く
- 「100問クリア」: 累計100問解く
- 「500問クリア」: 累計500問解く
- 「1000問クリア」: 累計1000問解く
- 「5000問クリア」: 累計5000問解く

**正答率系**
- 「完璧主義者」: 1回のドリルで正答率100%（10問以上）
- 「ほぼ完璧」: 1回のドリルで正答率90%以上（20問以上）
- 「安定感」: 10回連続で正答率80%以上

**連続系**
- 「3連続正解」: 3問連続正解
- 「10連続正解」: 10問連続正解
- 「30連続正解」: 30問連続正解
- 「7日連続学習」: 7日連続で学習
- 「30日連続学習」: 30日連続で学習

**科目系**
- 「英語マスター」: 英語で100問正解
- 「数学マスター」: 数学で100問正解
- 「全科目制覇」: 全5科目で各50問以上正解

**速度系**
- 「スピードスター」: 10問を5分以内で解く
- 「超高速」: 20問を10分以内で解く

#### 3.2 実績表示
- 専用の「実績」画面を追加
- 実績一覧を表示（獲得済み/未獲得を色分け）
- 実績獲得時にポップアップ表示
- 実績ごとに報酬（EXP、U-P、称号）を付与

---

### 4. U-P（うんちポイント）ショップ 🛒

#### 4.1 ポイント獲得
- 正解1問: U-P +10
- 連続正解ボーナス: 3連続+5、5連続+10、10連続+20
- ストリークボーナス: 上記参照
- 実績獲得: 実績ごとに異なる報酬

#### 4.2 ショップアイテム

**うんちレーサーカスタマイズ**
- 「金色うんち💛」: 500 U-P
- 「虹色うんち🌈」: 1000 U-P
- 「キラキラうんち✨」: 1500 U-P
- 「炎うんち🔥」: 2000 U-P
- 「宇宙うんち🚀」: 3000 U-P

**背景テーマ**
- 「トイレの夜」: 800 U-P
- 「黄金のトイレ」: 1500 U-P
- 「宇宙トイレ」: 2500 U-P

**エフェクト強化**
- 「特大パーティクル」: 1000 U-P（パーティクルが2倍）
- 「音響強化」: 1200 U-P（効果音が豪華に）
- 「スローモーション」: 800 U-P（正解時の演出がスローに）

**便利機能**
- 「ヒント機能」: 2000 U-P（1問につき1回、選択肢を1つ消せる）
- 「タイムフリーズ」: 1500 U-P（1回につき10秒時間停止）

#### 4.3 ショップ画面
- トップ画面に「ショップ」ボタンを追加
- カテゴリ別にアイテムを表示
- 購入済みアイテムは「使用中」表示
- 購入時に確認ダイアログ

---

### 5. 日替わりチャレンジ 📅

#### 5.1 チャレンジの種類
- **日替わりチャレンジ**: 毎日異なる課題
  - 例: 「今日は英語10問を90%以上でクリア！」
  - 例: 「今日は数学を20問解こう！」
  - 例: 「今日は全科目から5問ずつ解こう！」

- **週替わりチャレンジ**: 週ごとの大きな課題
  - 例: 「今週は100問解こう！」
  - 例: 「今週は全科目を制覇しよう！」

#### 5.2 チャレンジ報酬
- 日替わり: U-P +100、EXP +50
- 週替わり: U-P +500、EXP +200、特別称号

#### 5.3 チャレンジ表示
- トップ画面に「今日のチャレンジ」を表示
- 進捗バーで進捗を可視化
- 達成時に盛大な演出

---

### 6. タイムアタックモード ⏱️

#### 6.1 モード概要
- **制限時間**: 10問を5分以内、20問を10分以内など
- **時間表示**: 画面上部に大きなタイマー表示
- **時間切れ**: 自動的に終了、正答数を記録

#### 6.2 タイムアタック報酬
- 時間内に全問正解: U-P +200、EXP +100
- 時間内に90%以上: U-P +100、EXP +50
- 新記録達成: 特別ボーナス

#### 6.3 ランキング
- タイムアタックのベストタイムを記録
- 科目別、問題数別のランキング表示

---

### 7. ソーシャル機能（簡易版） 👥

#### 7.1 ローカルランキング
- **週間ランキング**: 週ごとの問題数ランキング
- **月間ランキング**: 月ごとの問題数ランキング
- **科目別ランキング**: 各科目の正答数ランキング

#### 7.2 ランキング表示
- 「ランキング」画面を追加
- 自分の順位をハイライト表示
- 上位3名には特別な表示（🥇🥈🥉）

#### 7.3 目標設定
- 「今週の目標」を設定可能
- 目標達成度をプログレスバーで表示
- 目標達成時に報酬

---

### 8. ストーリーモード 📖

#### 8.1 ストーリー概要
- **うんちレーサーの冒険**: 問題を解くことでストーリーが進む
- **チャプター制**: 各科目が1つのチャプター
- **エピソード**: 各単元が1つのエピソード

#### 8.2 ストーリー進行
- 単元をクリアすると次のエピソードがアンロック
- エピソードごとに短いストーリーテキスト表示
- ストーリー画面で進行状況を確認

#### 8.3 ストーリー報酬
- エピソードクリア: U-P +50、EXP +30
- チャプタークリア: U-P +300、EXP +150、特別称号

---

### 9. 統計の強化 📈

#### 9.1 詳細統計
- **学習時間**: 累計学習時間を表示
- **平均正答率**: 全体、科目別、単元別
- **最速記録**: 各問題数の最速タイム
- **苦手単元**: 正答率が低い単元を表示
- **得意単元**: 正答率が高い単元を表示

#### 9.2 ビジュアライゼーション
- レーダーチャート: 科目別の実力を可視化
- ヒートマップ: カレンダー上で学習量を色で表示
- 成長グラフ: 週ごと、月ごとの成長を表示

---

### 10. UI/UXの改善 🎨

#### 10.1 ホーム画面の強化
- **ダッシュボード表示**
  - 今日の学習状況（問題数、正答率）
  - 現在のストリーク
  - 今日のチャレンジ進捗
  - レベルとEXPバー
  - 獲得した称号

#### 10.2 通知システム
- ストリークが途切れそうな時
- チャレンジ達成時
- 実績獲得時
- レベルアップ時

#### 10.3 アニメーション強化
- レベルアップ時の盛大な演出
- 実績獲得時のアニメーション
- ショップ購入時の演出
- チャレンジ達成時の演出

---

## 🎮 実装優先度

### Phase 1（最優先）⭐⭐⭐
1. レベル・ランクシステム
2. ストリークシステム
3. U-Pショップ（基本機能）
4. アチーブメントシステム（基本実績）

### Phase 2（高優先度）⭐⭐
5. 日替わりチャレンジ
6. 統計の強化
7. UI/UXの改善（ダッシュボード）

### Phase 3（中優先度）⭐
8. タイムアタックモード
9. ソーシャル機能（ランキング）
10. ストーリーモード

---

## 💡 期待される効果

### モチベーション向上
- ✅ **毎日続ける理由**: ストリークシステムで継続学習を促進
- ✅ **成長の実感**: レベルアップで成長を可視化
- ✅ **達成感**: 実績システムで小さな目標を設定

### 学習効率向上
- ✅ **目標設定**: チャレンジで明確な目標を提示
- ✅ **苦手克服**: 統計で苦手単元を可視化
- ✅ **バリエーション**: 複数のモードで飽きない

### 楽しさの向上
- ✅ **カスタマイズ**: ショップで自分好みにカスタマイズ
- ✅ **競争**: ランキングで競争心を刺激
- ✅ **ストーリー**: ストーリーで世界観を強化

---

## 📝 実装時の注意点

1. **パフォーマンス**: 新機能追加時も軽快な動作を維持
2. **データ互換性**: 既存のデータを保持しつつ新機能を追加
3. **段階的実装**: Phase 1から順に実装し、動作確認しながら進める
4. **ユーザビリティ**: 複雑になりすぎないよう、UIをシンプルに保つ
5. **バランス調整**: 報酬のバランスを調整し、やりすぎ防止機能も検討

---

## 🎯 最終目標

**中学2年生が「今日も勉強したい！」と思えるゲームにする**

- 毎日開きたくなる仕組み
- 成長を実感できる仕組み
- 達成感を得られる仕組み
- 楽しみながら学べる仕組み

この4つの仕組みを実現することで、自然と勉強が習慣化され、成績向上につながることを目指します。
